<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1, shrink-to-fit=no">
    <meta name="Maker" content="Taoja" tel="13544425200">
    <meta name="format-detection" content="telephone=no">
    <title>详细信息</title>
    <link href="<?php echo base_url("public/member/phase2/styles/global.css");?>" rel="stylesheet">
    <script src="<?php echo base_url("public/member/phase2/scripts/jquery.js");?>"></script>
    <script src="<?php echo base_url("public/member/phase2/scripts/ui_control.js");?>"></script>
    <script src="<?php echo base_url(FD_PUBLIC)?>/js/ajaxForm.js"></script>
    <script src="<?php echo base_url("public/member/phase2/scripts/alert.js");?>"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <style>
        .bg_F3F4F8, body, html{background-color:#fff}
        @font-face {
            font-family: 'iconfont';  /* project id 279039 */
            src: url('<?=base_url("public/member/public/font/iconfont.woff");?>');
        }
        html{
            font-size: 12px;
            font-family: PingFang SC Light, 微软雅黑;
        }
        .w100 {
            width: 100%
        }
        .absolute {
            position: absolute;
        }
        body {
            width: 100%;
            height: 100%;
            position: absolute;
            margin: 0;
            font-size: 1rem;
            overflow: auto;
        }
        .right {
            float: right
        }
        .full {
            width: 100%;
            height: 100%
        }
        .fixed {
            position: fixed
        }
        .none {
            display: none
        }
        .relative {
            position: relative
        }
        ib {
            display: inline-block;
            vertical-align: middle;
            word-break: break-all;
        }
        flex {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }
        .center {
            text-align: center;
        }
        [around] {
            justify-content: space-around;
        }
        [between]{
            justify-content: space-between;
        }
        [nowrap] {
            flex-wrap: nowrap;
        }
        .tc{
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: RGBA(0,0,0,0.8);
            top: 0px;
            left: 0px;
        }
        .tc_body{
            width: 81.25%;
            text-align: center;
            margin: auto;
            background-color: white;
            border-radius: 5px;
        }
        .tc_body>div{
            padding: 1.25rem 1.75rem;
        }
        .tc_body>div>div:nth-child(1){
            font-size: 1.25rem;
        }
        .tc_body>div>div:nth-child(2){
            margin-top: 1.08rem;
        }
        .tc_body>div>div:nth-child(3){
            margin-top: 0.5rem;
        }
        .tc_body>div>flex{
            margin-top: 1rem;
        }
        .tc_body>div>flex>ib{
            width: 8.5rem;
            height: 2.91rem;
            text-align: center;
            line-height: 2.91rem;
            border-radius: 2px;
        }
        .tc_body>div>flex>ib:nth-child(1){
            border: 1px #ff9900 solid;
            color: #ff9900;
            background-color: white;
        }
        .tc_body>div>flex>ib:nth-child(2){
            border: 1px transparent solid;
            color: white;
            background-color: #ff9900;
        }
        @-webkit-keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        .fadeIn {
            -webkit-animation: fadeIn .5S forwards;
            animation: fadeIn .5S forwards;
        }
        @-webkit-keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }
        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }
        .fadeOut {
            -webkit-animation: fadeOut .5s forwards;
            animation: fadeOut .5s forwards;
        }
        @media screen and (min-width:375px){
            html{
                font-size: 14px;
            }
        }
        @media screen and (min-width:414px){
            html{
                font-size: 15px;
            }
        }
        .card_info{
            margin-top: 1.16rem;
        }
        .card_info>div:nth-child(1){
            border-bottom: 1px solid #e2e2e2;
        }
        .card_info>div{
            padding: 0px 1.25rem;
        }
        .card_info>div>flex:nth-child(1)>ib{
            font-size: 1.25rem;
            font-weight: bold;
        }
        .card_msg{
            color: #bfbfbf;
            margin-top: 1rem;
            padding-bottom: 1rem;
        }
        .pay_type>ib{
            width: 11.66rem;
            color: #bfbfbf;
            border: 1px solid #bfbfbf;
            border-radius: 3px;
            height: 2.67rem;
            line-height: 2.67rem;
            text-align: center;
            position: relative;
        }
        .pay_type>ib>ib{
            font-family: iconfont;
            font-size: 1.25rem;
            margin-right: 0.5rem;
        }
        .choiced{
            color: #ff9900 !important;
            border: 1px solid #ff9900 !important;
        }
        .choiced:after{
            content: "";
            position: absolute;
            background-image: url(<?=base_url("public/member/public/img/gou.png");?>);
            width: 2rem;
            height: 2rem;
            background-size: cover;
            right: -1px;
            top: -1px;
        }
        .shuoming{
            margin-top: 1.83rem;
            color: #bfbfbf;
            padding-bottom: 0.83rem;
        }
        .footer{
            height: 3.75rem;
            bottom: 0px;
            border-top: 1px solid #e2e2e2;
            background-color: white;
        }
        .footer ib{
            height: 100%;
            line-height: 3.75rem;
        }
        .liji{
            width: 8.33rem;
            text-align: center;
            background-color: #ff9900;
            color: white;
            font-size: 1.33rem;
        }
        .theprice{
            color: #ff9900;
            width: 5.83rem;
            text-align: center;
            font-size: 1.33rem;
        }
        ib.back a{color: #ff9900; text-decoration: none; background-color: white; display: block; width: 100%;}
        ib.ok a{ color: white; text-decoration: none; background-color: #ff9900; display: block; width: 100%;}
    </style>
</head>
<body>
<div class="w100">
    <img class="w100" src="<?=!empty($card['logo_url'])?$card['logo_url']:'';?>">
</div>
<div class="card_info">
    <div>
        <flex between>
            <ib><?=$card['title'];?></ib>
            <ib>￥<?=$card['money'];?></ib>
        </flex>
        <div class="card_msg"><?=$card['brand_name'];?></div>
    </div>
    <div>
        <?php if(!empty($pay_type)):?>
        <div class="card_msg">请选择支付方式</div>
        <flex class="pay_type" between>
            <?php foreach ($pay_type as $key => $py):?>
            <ib <?php if($key == 'wechat'):?>class="choiced"<?php endif;?> data-paytype="<?=$key?>"><ib>&#xe601;</ib>
                <?=$py?>
            </ib>
            <?php endforeach;?>
<!--            <ib><ib>&#xe602;</ib>储值支付</ib>-->
        </flex>
        <?php endif;?>
        <div class="shuoming">会员卡使用说明</div>
        <div><?=$card['description'];?></div>
    </div>
</div>
<div style="height: 3.75rem;"></div>
<form action="<?php echo base_url("index.php/membervip/depositcard/buycard");?>" class="form-save" method="post">
<div class="fixed w100 footer">
    <input type="hidden" name="cardId" value="<?php echo $card['deposit_card_id'];?>" />
    <input type="hidden" name="pay_type" value="wechat" />
    <flex between>
        <ib class="theprice">¥<?=$card['money'];?></ib>
        <ib class="liji">立即购买</ib>
    </flex>
</div>
</form>
<flex class="tc fadeIn none">
    <div class="tc_body">
        <div>
            <div>温馨提示</div>
            <div>尊敬的会员，为了保障您的个人信息安全</div>
            <div>请您登录后再购买会员卡</div>
            <flex between>
                <ib class="back"><a href="<?=site_url('membervip/reg?id='.$inter_id);?>">注册</a></ib>
                <ib class="ok"><a href="<?=site_url('membervip/login?id='.$inter_id);?>">登录</a></ib>
            </flex>
        </div>
    </div>
</flex>
<script>
    wx.config({
        debug: false,
        appId: '<?php echo $wx_config["appId"]?>',
        timestamp: <?php echo $wx_config["timestamp"]?>,
        nonceStr: '<?php echo $wx_config["nonceStr"]?>',
        signature: '<?php echo $wx_config["signature"]?>',
        jsApiList: [<?php echo (isset($wx_config['js_api_list']) && !empty($wx_config['js_api_list']))?$wx_config['js_api_list'].",":'' ; ?>'getLocation','openLocation']
    });
    wx.ready(function(){
        <?php if( isset($js_menu_hide) && $js_menu_hide ): ?>wx.hideMenuItems({ menuList: [<?php echo $js_menu_hide; ?>] });<?php endif; ?>
        <?php if( isset($js_menu_show) && $js_menu_show ): ?>wx.showMenuItems({ menuList: [<?php echo $js_menu_show; ?>] });<?php endif; ?>

        <?php if( isset($js_share_config) && $js_share_config ): ?>
        wx.onMenuShareTimeline({
            title: '<?php echo $js_share_config["title"]?>',
            link: '<?php echo $js_share_config["link"]?>',
            imgUrl: '<?php echo $js_share_config["imgUrl"]?>',
            success: function () {},
            cancel: function () {}
        });
        wx.onMenuShareAppMessage({
            title: '<?php echo $js_share_config["title"]?>',
            desc: '<?php echo $js_share_config["desc"]?>',
            link: '<?php echo $js_share_config["link"]?>',
            imgUrl: '<?php echo $js_share_config["imgUrl"]?>',
            //type: '', //music|video|link(default)
            //dataUrl: '', //use in music|video
            success: function () {},
            cancel: function () {}
        });

        <?php endif; ?>
    });

    $(".pay_type").on("click","ib",function(){
        $(".pay_type ib").removeClass("choiced");
        $(this).addClass("choiced");
        $("input[name=pay_type]").val($(this).data("paytype"))
    });
    //        $(".tc").addClass("none");

    /* 提交信息 START */
    $('.liji').click(function(){
        <?php if(isset($extra) && $extra['loginFlag']){?>
        var form = $(".form-save"),form_url=form.attr("action"),btn = $(this),loadtip=null;
        form.ajaxSubmit({
            url:form_url,
            dataType:'json',
            timeout:20000,
            beforeSubmit: function(arr, $form, options){
                pageloading();
            },
            success: function(result){
                removeload();
                if(result.status==1){
                    window.location.href=result.data;
                }else{
                    $.MsgBox.Alert(result.message);
                }
            },
            error:function () {
                removeload();
                $.MsgBox.Alert('网络异常,请求失败,请刷新重试或联系管理员!');
            }
        });
        <?php }else{ ?>
            location.href = '<?php echo base_url("index.php/membervip/login?id=".$inter_id."&redir=".$extra['re_url']);?>';
        <?php } ?>
    });
    /* 提交信息 END */
</script>
</body>
</html>