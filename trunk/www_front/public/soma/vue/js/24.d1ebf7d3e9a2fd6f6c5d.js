webpackJsonp([24],{191:function(e,s,t){"use strict";function i(e,s){for(var t=0,i=s.length;t<i;){var a=s[t];return n(a,e)?(t++,{passed:!0}):{passed:!1,message:a.message}}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=i;var a=function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e},d=function(e,s){return void 0===e||null===e||(!("array"!==s||!Array.isArray(e)||e.length)||!(!a(s)||"string"!=typeof e||e))},r={phone:function(e){return/1\d{10}/.test(e)},required:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string";return!d(e,s)},range:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",t=arguments[2],i=arguments[3],a=arguments[4],d=e;return"string"!==s&&"array"!==s||(d=e.length),a?d===a:void 0!==t&&void 0===i?d>=t:void 0===t&&void 0!==i?d<=i:void 0===t||void 0===i||d>=t&&d<=i}},n=function(e,s){return e.required?r.required(s,e.type):e.type&&r[e.type]?r[e.type](s):e.length?r.range(s,e.type,e.min,e.max,e.len):e.validator?e.validator(s,e):void 0}},193:function(e,s,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var a=t(72),d=i(a),r=t(92),n=t(191),o=i(n),c={province:"",city:"",region:"",contact:"",phone:"",address:""};s.default={name:"jfk-address",components:{"address-select":function(){return t.e(25).then(t.bind(null,236))}},data:function(){var e=this;return{aid:"-1",eaid:"-1",isEditing:!1,isSavIng:!1,loading:!1,actionsheetVisible:!1,addressDataLoaded:!1,addressPicked:{},addressRegionIds:[],rules:{contact:[{required:!0,message:"请输入收件人"},{max:10,length:!0,message:"收件人必须在10个字符内"}],phone:[{required:!0,message:"请输入收件电话"},{type:"phone",message:"请填写正确的手机号码"}],area:[{validator:function(){return e.addressPicked.province},message:"请选择收件地址"}],address:[{required:!0,message:"请填写详细地址"}]},validResult:{contact:{passed:!1,message:""},phone:{passed:!1,message:""},area:{passed:!1,message:""},address:{passed:!1,message:""}}}},beforeCreate:function(){this.maxHeight=window.innerHeight-50-15+"px"},created:function(){this.aid=this.addressId,this.address.length||(this.isEditing=!0)},computed:{showAdd:function(){return this.addressDataLoaded||(this.loading=!0),!this.address.length||!!this.isEditing},addressPickedDetail:function(){var e=this.addressPicked,s=e.province_name,t=void 0===s?"":s,i=e.city_name,a=void 0===i?"":i,d=e.region_name;return t+a+(void 0===d?"":d)},addressItems:{get:function(){return this.address},set:function(e){this.$emit("update:address",e)}}},watch:{isEditing:function(e){if(e){var s=(0,d.default)({},c),t=this.eaid,i=this.address;if("-1"!==t&&i.length){var a=i.filter(function(e){return e.address_id===t});s=(0,d.default)(s,a[0])}this.addressPicked=s}},addressId:function(e){this.aid=e},showAddressList:function(e){e&&this.addressItems.length&&(this.eaid="-1",this.isEditing=!1)}},methods:{handleEditAddress:function(e){this.isEditing=!0,this.eaid=e},checkForm:function(){var e=this.addressPicked,s=this.rules,t=this,i=!0;for(var a in s){var r=(0,o.default)(e[a],s[a]);t.validResult[a]=(0,d.default)({},t.validResult[a],r),r.passed||(i=!1,alert(r.message))}return i},handleSaveAddress:function(){if(this.checkForm()&&!this.isSaving){var e=this,s=this.addressPicked,t=this.addressItems,i=s.address_id,a=(0,d.default)({},s);this.isSaving=!0,(0,r.postExpressSave)(a).then(function(a){if(e.isSaving=!1,e.eaid="-1",e.isEditing=!1,s.address_id=a.web_data.address_id,i){for(var d=-1,r=t.length,n=0;n<r;){if(t[n].address_id===i){d=n;break}n++}t.splice(d,1,s)}else t.unshift(s);e.$emit("pick-address",a.web_data.address_id)}).catch(function(){e.isSaving=!1})}},handlePickAddress:function(e){this.$emit("pick-address",e)},handleAddAddress:function(){this.eaid="-1",this.isEditing=!0},handleAddressLoaded:function(){this.loading=!1,this.addressDataLoaded=!0},handleAddressPicked:function(e,s){this.actionsheetVisible=!1,this.addressPicked=(0,d.default)({},this.addressPicked,{province:s[0].region_id,province_name:s[0].region_name,city:s[1].region_id,city_name:s[1].region_name,region:s[2]&&s[2].region_id,region_name:s[2]&&s[2].region_name})},handleShowAddressSelect:function(){var e=this.addressPicked;this.addressRegionIds=[e.province,e.city,e.region],this.actionsheetVisible=!0}},props:{address:{type:Array,required:!0,default:[]},addressId:String,showAddressList:Number}}},237:function(e,s,t){var i=t(2)(t(193),t(297),null,null);e.exports=i.exports},297:function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"jfk-address jfk-pl-30 jfk-pr-30 jfk-form font-size--28"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdd,expression:"showAdd"}],staticClass:"jfk-address__add"},[t("form",{staticClass:"jfk-address-form"},[t("div",{staticClass:"form-item"},[t("label",[t("span",{staticClass:"form-item__label form-item__label--word-3 font-color-extra-light-gray"},[e._v("收件人")]),e._v(" "),t("div",{staticClass:"form-item__body"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addressPicked.contact,expression:"addressPicked.contact"}],staticClass:"font-color-white",attrs:{type:"text",placeholder:"请输入收件人"},domProps:{value:e.addressPicked.contact},on:{input:function(s){s.target.composing||(e.addressPicked.contact=s.target.value)}}})])])]),e._v(" "),t("div",{staticClass:"form-item"},[t("label",[t("span",{staticClass:"form-item__label font-color-extra-light-gray"},[e._v("收件电话")]),e._v(" "),t("div",{staticClass:"form-item__body"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addressPicked.phone,expression:"addressPicked.phone"}],staticClass:"font-color-white",attrs:{type:"text",placeholder:"请输入收件人手机号码"},domProps:{value:e.addressPicked.phone},on:{input:function(s){s.target.composing||(e.addressPicked.phone=s.target.value)}}})])])]),e._v(" "),t("div",{staticClass:"form-item form-item__select"},[t("span",{staticClass:"form-item__label  font-color-extra-light-gray"},[e._v("收件地址")]),e._v(" "),t("div",{staticClass:"form-item__body",on:{click:e.handleShowAddressSelect}},[t("p",{directives:[{name:"show",rawName:"v-show",value:!e.addressPickedDetail,expression:"!addressPickedDetail"}],staticClass:"tip font-color-light-gray"},[e._v("请选择收件区域")]),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.addressPickedDetail,expression:"addressPickedDetail"}],staticClass:"tip font-color-white"},[e._v(e._s(e.addressPickedDetail))])]),e._v(" "),e._m(0)]),e._v(" "),t("div",{staticClass:"form-item"},[t("label",[t("span",{staticClass:"form-item__label font-color-extra-light-gray"},[e._v("详细地址")]),e._v(" "),t("div",{staticClass:"form-item__body"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.addressPicked.address,expression:"addressPicked.address"}],staticClass:"font-color-white",attrs:{type:"text",placeholder:"如街道、楼层等"},domProps:{value:e.addressPicked.address},on:{input:function(s){s.target.composing||(e.addressPicked.address=s.target.value)}}})])])])]),e._v(" "),t("div",{staticClass:"jfk-address__add-control"},[t("a",{staticClass:"jfk-button--free jfk-button jfk-button--primary is-plain",class:{"is-disabled":e.isSavIng},attrs:{href:"javascript:;"},on:{click:e.handleSaveAddress}},[e._v("保存")])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showAdd,expression:"!showAdd"}],staticClass:"jfk-address__list"},[t("ul",{staticClass:"jfk-address__list-box",style:{"max-height":e.maxHeight}},e._l(e.addressItems,function(s){return t("li",{key:s.address_id,staticClass:"jfk-address__list-item jfk-pt-30"},[t("div",{staticClass:"jfk-radio jfk-radio--shape-rect color-golden"},[t("label",{staticClass:"jfk-radio__label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.aid,expression:"aid"}],attrs:{type:"radio"},domProps:{checked:s.address_id===e.aid,value:s.address_id,checked:e._q(e.aid,s.address_id)},on:{__c:function(t){e.aid=s.address_id}}}),e._v(" "),t("div",{staticClass:"jfk-radio__text",on:{click:function(t){e.handlePickAddress(s.address_id)}}},[t("div",{staticClass:"jfk-address__list-item-cont jfk-flex is-align-middle"},[t("div",{staticClass:"address-item-box"},[t("div",{staticClass:"address-item-cont"},[t("span",{staticClass:"contact"},[e._v(e._s(s.contact))]),e._v(" "),t("span",{staticClass:"phone"},[e._v(e._s(s.phone))])]),e._v(" "),t("div",{staticClass:"address-item-cont"},[e._v("\n                    "+e._s((s.provice_name||"")+(s.city_name||"")+(s.region_name||"")+(s.address||""))+"\n                  ")])]),e._v(" "),t("div",{staticClass:"address-item-edit jfk-flex is-align-middle is-justify-center",on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.handleEditAddress(s.address_id)}}},[t("i",{staticClass:"edit-icon"},[e._v("编辑")])])])]),e._v(" "),e._m(1,!0)])])])})),e._v(" "),t("div",{staticClass:"jfk-address__list-control"},[t("a",{staticClass:"jfk-button jfk-button--primary jfk-button-higher jfk-button--free",attrs:{href:"javascript:;"},on:{click:e.handleAddAddress}},[t("i",{staticClass:"jfk-address__list-icon jfk-d-ib"},[e._v("+")]),t("i",{staticClass:"jfk-d-ib"},[e._v("新增收货地址")])])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]},[e._v("正在加载")]),e._v(" "),t("jfk-popup",{staticClass:"jfk-actionsheet jfk-actionsheet__address",attrs:{closeOnClickModal:!1,position:"bottom"},model:{value:e.actionsheetVisible,callback:function(s){e.actionsheetVisible=s},expression:"actionsheetVisible"}},[t("address-select",{attrs:{ids:e.addressRegionIds},on:{"address-data-loaded":e.handleAddressLoaded,"address-picked":e.handleAddressPicked}})],1)],1)},staticRenderFns:[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",{staticClass:"form-item__foot"},[t("i",{staticClass:"jfk-font icon-user_icon_jump_normal font-color-extra-light-gray"})])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",{staticClass:"jfk-radio__icon"},[t("i",{staticClass:"jfk-font icon-radio_icon_selected_default jfk-radio__icon-icon"})])}]}}});